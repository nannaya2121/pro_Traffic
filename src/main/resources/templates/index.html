<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index_css.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <title>index</title>
</head>
<body onkeydown="return false" oncontextmenu="return false" onselectstart="return false" ondragstart="return false">
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <div class="wrapper">

        <div class="main">
            <nav class="main_nav">
                <div class="logoWrapper">
                    <div><a class="logo" href="/">로고들어올자리</a></div>
                </div>
                <div class="navContentWrapper">
                    <div><a class="cctv" href="#">CCTV 보러가기</a></div>
                    <div><a class="accident" href="/traffic/searchTraffic">지역별 사고현황</a></div>
                    <div><a class="notice" href="#">공지사항</a></div>
                </div>
            </nav>
            
            <div class="contentWrapper">

                <div class="leftContent">
                    <div class="smallContentWrapper0">
                        <div class="small_content0">서울 CCTV</div>
                    </div>
                </div>

                <div class="rightContent">
                    <div class="smallContentWrapper1">
                        <div class="small_content1">부산 CCTV</div>
                        <div class="small_content2">대구 CCTV</div>
                    </div>
                    <div class="smallContentWrapper2">
                        <div class="small_content3">인천 CCTV</div>
                        <div class="small_content4">광주 CCTV</div>
                    </div>
                </div>

            </div>
        </div>
        <div class="footer"></div>

    </div>
    <!-- <br><br><br><br><br><br><br>
    
    <a href="/admin/admin">관리자페이지</a> -->
    <div class="tt">
    [[${cctvurl}]]
    </div>
    <div>
    <input type="text" id="reValue">
    </div>
    
	
<video id="video" autoplay controls crossorigin="anonymous"></video>
<script type="text/javascript" src="js/video.min.js"></script>
<script src="js/index.js"></script>

<script th:inline="javascript">

	var test = '[[${cctvurl}]]';
	var test1 = test.replace('{"','');
	var test2 = test1.replace('"}','');
	var test3 = test2.replace('cctvurl":"','');
	var test4 = $('#reValue').val(test3);
	var result = test4.val();

      var video = document.getElementById('video');
      var videoSrc = result;
      //
      // 우선 HLS를 지원하는지 체크
      //
      if (video.canPlayType('application/vnd.apple.mpegurl')) {
    	  console.log('1');
        video.src = videoSrc;
      //
      // HLS를 지원하지 않는다면 hls.js를 지원
      //
      } else if (Hls.isSupported()) {
    	  console.log('2');
        var hls = new Hls();
        hls.loadSource(videoSrc);
        hls.attachMedia(video);
      }

    </script>
</body>
</html>